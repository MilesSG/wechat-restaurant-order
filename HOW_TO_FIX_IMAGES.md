# 如何修复图片问题

本文档提供了解决微信餐厅点餐小程序图片问题的指南，特别是针对自动下载失败的情况。

## 问题说明

由于网络限制或其他原因，自动下载脚本可能无法成功下载图片。特别是在图片源站点有访问限制的情况下，这种问题会更加明显。

## 手动替换图片方法

### 特色菜品图片替换方法

如果特色菜品的图片（如红烧排骨）无法显示，请按照以下步骤进行手动替换：

1. 准备图片文件：
   - 红烧排骨图片 → 命名为 `dish1.jpg`
   - 水煮鱼片图片 → 命名为 `dish2.jpg`
   - 干锅牛蛙图片 → 命名为 `dish3.jpg`
   - 宫保鸡丁图片 → 命名为 `dish4.jpg`
   - 麻婆豆腐图片 → 命名为 `dish5.jpg`

2. 确保图片格式正确：
   - 建议使用JPG格式
   - 建议图片尺寸为300x300像素或接近此比例
   - 文件大小控制在100KB以内更适合小程序使用

3. 放置文件：
   - 将这些图片文件放入项目的 `images/dishes/` 目录

### 默认图片替换方法

如果默认图片无法显示，请按照以下步骤进行手动替换：

1. 准备图片文件：
   - 通用默认图片 → 命名为 `default_dish.jpg`
   - 热菜默认图片 → 命名为 `default_hot_dish.jpg`
   - 凉菜默认图片 → 命名为 `default_cold_dish.jpg`
   - 汤品默认图片 → 命名为 `default_soup.jpg`
   - 主食默认图片 → 命名为 `default_staple.jpg`
   - 甜点默认图片 → 命名为 `default_dessert.jpg`
   - 饮品默认图片 → 命名为 `default_drink.jpg`

2. 放置文件：
   - 将这些图片文件放入项目的 `images/dishes/` 目录

## 如何验证图片修复

手动替换图片后，请执行以下步骤验证修复是否成功：

1. 检查图片文件是否正确放置在对应目录
2. 重启微信开发者工具
3. 清除小程序缓存
4. 重新编译和预览小程序
5. 检查图片是否正确显示在首页的特色推荐区域

## 代码中的应急处理

为了应对可能的图片问题，我们已经在代码中添加了应急处理措施：

1. 在 `utils/image-util.js` 中，我们对特色菜品图片进行了特殊处理：
   - 红烧排骨（dish1.jpg）会自动使用热菜默认图片（default_hot_dish.jpg）
   - 其他特色菜品也会根据类型使用对应的默认图片

2. 这种处理确保即使图片文件缺失或损坏，页面也能显示替代图片，不会出现空白。

## 长期解决方案

为了彻底解决图片问题，建议考虑以下长期解决方案：

1. 将图片托管到自己的服务器或云存储（如阿里云OSS、腾讯云COS等）
2. 使用微信小程序的云开发功能存储图片资源
3. 考虑将常用图片打包到小程序中，而不是通过网络加载

以上方案可以避免因为第三方图片源不稳定导致的问题。 