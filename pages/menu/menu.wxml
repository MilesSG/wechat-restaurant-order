<!--pages/menu/menu.wxml-->
<view class="container menu-container">
  <!-- æœç´¢åŒºåŸŸ -->
  <view class="search-section">
    <view class="search-box">
      <icon type="search" size="16" color="#999"></icon>
      <input type="text" placeholder="æœç´¢èœå“" bindinput="searchDishes" value="{{searchTerm}}"/>
      <icon wx:if="{{searchTerm.length > 0}}" type="clear" size="16" color="#999" bindtap="clearSearch"></icon>
    </view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <scroll-view scroll-x class="category-scroll">
    <view class="category-list">
      <view class="category-item {{selectedCategory === 'all' ? 'active' : ''}}" 
            data-id="all" 
            bindtap="selectCategory">
        å…¨éƒ¨
      </view>
      <view class="category-item {{selectedCategory === item.id ? 'active' : ''}}" 
            wx:for="{{categories}}" 
            wx:key="id" 
            data-id="{{item.id}}" 
            bindtap="selectCategory">
        {{item.name}}
      </view>
    </view>
  </scroll-view>

  <!-- èœå“åˆ—è¡¨ -->
  <scroll-view scroll-y class="dishes-container">
    <view class="dishes-list">
      <view wx:if="{{filteredDishes.length === 0}}" class="no-dishes">
        <text>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„èœå“</text>
      </view>
      <view wx:else>
        <view class="dish-card" wx:for="{{filteredDishes}}" wx:key="id">
          <view class="dish-image">
            <image src="{{item.image}}" mode="aspectFill"></image>
            <view wx:if="{{item.isPopular}}" class="dish-tag popular">çƒ­é—¨</view>
            <view wx:if="{{item.isSpicy}}" class="dish-tag spicy">è¾£</view>
          </view>
          <view class="dish-info">
            <view class="dish-name-price">
              <text class="dish-name">{{item.name}}</text>
              <text class="dish-price">Â¥{{item.price}}</text>
            </view>
            <text class="dish-desc">{{item.description}}</text>
            <view class="dish-actions">
              <button class="add-button" data-id="{{item.id}}" bindtap="addToCart">åŠ å…¥è´­ç‰©è½¦</button>
            </view>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- è´­ç‰©è½¦æ‚¬æµ®æŒ‰é’® -->
  <view class="cart-button" bindtap="navigateToOrder">
    <view class="cart-icon">ğŸ›’</view>
    <view class="cart-text">æŸ¥çœ‹è´­ç‰©è½¦</view>
  </view>
</view>